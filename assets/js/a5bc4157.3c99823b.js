"use strict";(globalThis.webpackChunktelevision_website=globalThis.webpackChunktelevision_website||[]).push([[9761],{5753:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"advanced/template-system","title":"Template System","description":"Television uses a powerful template system based on string-pipeline for dynamic formatting of entries, previews, and outputs. This guide covers everything you need to know to master templating.","source":"@site/../docs/advanced/01-template-system.md","sourceDirName":"advanced","slug":"/advanced/template-system","permalink":"/television/advanced/template-system","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Advanced","permalink":"/television/category/advanced"},"next":{"title":"Tips and Tricks","permalink":"/television/advanced/tips-and-tricks"}}');var l=i(2714),r=i(8885);const t={},d="Template System",c={},a=[{value:"Where Templates Are Used",id:"where-templates-are-used",level:2},{value:"Basic Placeholders",id:"basic-placeholders",level:2},{value:"The <code>{}</code> Placeholder",id:"the--placeholder",level:3},{value:"Positional Placeholders",id:"positional-placeholders",level:3},{value:"The Split Operation",id:"the-split-operation",level:2},{value:"Split Syntax",id:"split-syntax",level:3},{value:"Split Examples",id:"split-examples",level:3},{value:"Stripping ANSI Codes",id:"stripping-ansi-codes",level:2},{value:"Pipelines",id:"pipelines",level:2},{value:"String Transformations",id:"string-transformations",level:2},{value:"Case Transformations",id:"case-transformations",level:3},{value:"Trimming",id:"trimming",level:3},{value:"Prefix and Suffix",id:"prefix-and-suffix",level:3},{value:"Padding",id:"padding",level:3},{value:"Regular Expressions",id:"regular-expressions",level:2},{value:"Extract with Regex",id:"extract-with-regex",level:3},{value:"Replace with Regex",id:"replace-with-regex",level:3},{value:"Working with Collections",id:"working-with-collections",level:2},{value:"Map",id:"map",level:3},{value:"Filter",id:"filter",level:3},{value:"Sort",id:"sort",level:3},{value:"Join",id:"join",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Git Log Channel",id:"git-log-channel",level:3},{value:"Text Search (ripgrep)",id:"text-search-ripgrep",level:3},{value:"Process Management",id:"process-management",level:3},{value:"Docker with Tabs",id:"docker-with-tabs",level:3},{value:"Complex Pipeline Example",id:"complex-pipeline-example",level:2},{value:"Escaping Special Characters",id:"escaping-special-characters",level:2},{value:"Debugging Tips",id:"debugging-tips",level:2},{value:"Reference",id:"reference",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"template-system",children:"Template System"})}),"\n",(0,l.jsxs)(n.p,{children:["Television uses a powerful template system based on ",(0,l.jsx)(n.a,{href:"https://docs.rs/string_pipeline",children:"string-pipeline"})," for dynamic formatting of entries, previews, and outputs. This guide covers everything you need to know to master templating."]}),"\n",(0,l.jsx)(n.h2,{id:"where-templates-are-used",children:"Where Templates Are Used"}),"\n",(0,l.jsx)(n.p,{children:"Templates appear in several channel fields:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source.display"}),": Format how entries appear in the results list"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"source.output"}),": Format the final output when an entry is selected"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"preview.command"}),": Build the preview command"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"preview.header/footer"}),": Dynamic preview panel headers/footers"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"actions.*.command"}),": Format action commands"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"basic-placeholders",children:"Basic Placeholders"}),"\n",(0,l.jsxs)(n.h3,{id:"the--placeholder",children:["The ",(0,l.jsx)(n.code,{children:"{}"})," Placeholder"]}),"\n",(0,l.jsx)(n.p,{children:"The simplest template - represents the entire entry:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:"[preview]\ncommand = \"cat '{}'\"  # Preview the selected file\n"})}),"\n",(0,l.jsx)(n.h3,{id:"positional-placeholders",children:"Positional Placeholders"}),"\n",(0,l.jsx)(n.p,{children:"Access parts of a delimited entry by position:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Entry: "file.txt:42:error message"\n[preview]\ncommand = "bat -H {1} \'{0}\'"  # Open file.txt, highlight line 42\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{0}"}),": First field (",(0,l.jsx)(n.code,{children:"file.txt"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{1}"}),": Second field (",(0,l.jsx)(n.code,{children:"42"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"{2}"}),": Third field (",(0,l.jsx)(n.code,{children:"error message"}),")"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["The default delimiter is ",(0,l.jsx)(n.code,{children:":"}),", but you can use any delimiter with ",(0,l.jsx)(n.code,{children:"split"}),"."]}),"\n",(0,l.jsx)(n.h2,{id:"the-split-operation",children:"The Split Operation"}),"\n",(0,l.jsx)(n.p,{children:"Split entries on custom delimiters:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Entry: "path/file.txt|42|info"\n[source]\noutput = "{split:|:0}"  # Outputs: path/file.txt\n'})}),"\n",(0,l.jsx)(n.h3,{id:"split-syntax",children:"Split Syntax"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{split:DELIMITER:INDEX_OR_RANGE}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Single index:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{split:,:0}   # First element\n{split:,:1}   # Second element\n{split:,:-1}  # Last element\n{split:,:-2}  # Second to last\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Ranges:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{split:,:..}    # All elements (joined by delimiter)\n{split:,:1..}   # From index 1 to end\n{split:,:..2}   # From start to index 2 (exclusive)\n{split:,:1..3}  # From index 1 to 3 (exclusive)\n{split:,:1..-1} # From index 1 to second-to-last\n"})}),"\n",(0,l.jsx)(n.h3,{id:"split-examples",children:"Split Examples"}),"\n",(0,l.jsxs)(n.p,{children:["Given entry: ",(0,l.jsx)(n.code,{children:'"a,b,c,d,e"'})]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Template"}),(0,l.jsx)(n.th,{children:"Result"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:0}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"a"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:2}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"c"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:-1}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"e"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:1..3}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"b,c"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:2..}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"c,d,e"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"{split:,:..2}"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"a,b"})})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"stripping-ansi-codes",children:"Stripping ANSI Codes"}),"\n",(0,l.jsx)(n.p,{children:"Remove ANSI escape sequences (colors) from entries:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[source]\noutput = "{strip_ansi}"  # Clean output without color codes\n'})}),"\n",(0,l.jsx)(n.p,{children:"Useful when source commands output colored text but you need plain text for further processing."}),"\n",(0,l.jsx)(n.h2,{id:"pipelines",children:"Pipelines"}),"\n",(0,l.jsxs)(n.p,{children:["Chain multiple operations with ",(0,l.jsx)(n.code,{children:"|"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Entry: "\\x1b[31mpath/file.txt:42:error\\x1b[0m"\n[source]\noutput = "{strip_ansi|split:\\\\::0}"  # Outputs: path/file.txt\n'})}),"\n",(0,l.jsx)(n.p,{children:"Operations execute left to right."}),"\n",(0,l.jsx)(n.h2,{id:"string-transformations",children:"String Transformations"}),"\n",(0,l.jsx)(n.h3,{id:"case-transformations",children:"Case Transformations"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{upper}      # UPPERCASE\n{lower}      # lowercase\n{capitalize} # Capitalize first letter\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trimming",children:"Trimming"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{trim}       # Remove leading/trailing whitespace\n{trim_start} # Remove leading whitespace\n{trim_end}   # Remove trailing whitespace\n"})}),"\n",(0,l.jsx)(n.h3,{id:"prefix-and-suffix",children:"Prefix and Suffix"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{prepend:PREFIX}  # Add prefix\n{append:SUFFIX}   # Add suffix\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[source]\ndisplay = "{prepend:> |append: <}"  # Entry "foo" becomes "> foo <"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"padding",children:"Padding"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{pad:WIDTH:CHAR:DIRECTION}\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"WIDTH"}),": Target width"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"CHAR"}),": Padding character"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"DIRECTION"}),": ",(0,l.jsx)(n.code,{children:"left"}),", ",(0,l.jsx)(n.code,{children:"right"}),", or ",(0,l.jsx)(n.code,{children:"center"})]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'{pad:10:0:left}   # "42" becomes "0000000042"\n{pad:10: :center} # "foo" becomes "   foo    "\n'})}),"\n",(0,l.jsx)(n.h2,{id:"regular-expressions",children:"Regular Expressions"}),"\n",(0,l.jsx)(n.h3,{id:"extract-with-regex",children:"Extract with Regex"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{regex_extract:PATTERN}\n{regex_extract:PATTERN:GROUP}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Extract numbers\n{regex_extract:\\d+}         # "file123.txt" -> "123"\n\n# Extract capture group\n{regex_extract:v(\\d+):1}    # "v2.3.4" -> "2"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"replace-with-regex",children:"Replace with Regex"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"{regex_replace:PATTERN:REPLACEMENT}\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'{regex_replace:\\s+:_}  # "hello world" -> "hello_world"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"working-with-collections",children:"Working with Collections"}),"\n",(0,l.jsx)(n.p,{children:"When processing multiple entries (e.g., multi-select), use collection operations:"}),"\n",(0,l.jsx)(n.h3,{id:"map",children:"Map"}),"\n",(0,l.jsx)(n.p,{children:"Apply a transformation to each element:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'{split:,:..|map:{trim|upper}}\n# "a, b, c" -> "A,B,C"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"filter",children:"Filter"}),"\n",(0,l.jsx)(n.p,{children:"Keep elements matching a pattern:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'{split:,:..|filter:\\.py$}\n# "a.py,b.txt,c.py" -> "a.py,c.py"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"sort",children:"Sort"}),"\n",(0,l.jsx)(n.p,{children:"Sort elements:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:"{split:,:..|sort}       # Ascending\n{split:,:..|sort:desc}  # Descending\n"})}),"\n",(0,l.jsx)(n.h3,{id:"join",children:"Join"}),"\n",(0,l.jsx)(n.p,{children:"Join elements with a custom delimiter:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:"{split:,:..|join:\\n}  # Join with newlines\n"})}),"\n",(0,l.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,l.jsx)(n.h3,{id:"git-log-channel",children:"Git Log Channel"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[source]\ncommand = "git log --oneline --color=always"\noutput = "{strip_ansi|split: :0}"  # Extract commit hash\nansi = true\n\n[preview]\ncommand = "git show --color=always \'{strip_ansi|split: :0}\'"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"text-search-ripgrep",children:"Text Search (ripgrep)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[source]\ncommand = "rg --line-number --no-heading --color=always ."\noutput = "{strip_ansi|split:\\\\::..2}"  # file:line\nansi = true\n\n[preview]\ncommand = "bat -H \'{split:\\\\::1}\' --color=always \'{split:\\\\::0}\'"\noffset = "{split:\\\\::1}"  # Scroll to matching line\n'})}),"\n",(0,l.jsx)(n.h3,{id:"process-management",children:"Process Management"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Entry: "12345  user  /usr/bin/process"\n[source]\ncommand = "ps aux"\ndisplay = "{split: :..3}"  # Show PID, user, command\n\n[actions.kill]\ncommand = "kill -9 \'{split: :0}\'"  # Kill by PID\n'})}),"\n",(0,l.jsx)(n.h3,{id:"docker-with-tabs",children:"Docker with Tabs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[source]\ncommand = "docker ps --format \'{{.ID}}\\\\t{{.Names}}\\\\t{{.Status}}\'"\n\n[preview]\ncommand = "docker logs \'{split:\\\\t:0}\'"  # Use container ID\n\n[source]\ndisplay = "{split:\\\\t:1} ({split:\\\\t:2})"  # Show: name (status)\n'})}),"\n",(0,l.jsx)(n.h2,{id:"complex-pipeline-example",children:"Complex Pipeline Example"}),"\n",(0,l.jsx)(n.p,{children:"Transform a complex entry step by step:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'# Input: "  \\x1b[31mapp.py,readme.md,test.py\\x1b[0m  "\n# Goal: Filter .py files, sort, format as bullet list\n\n{trim|strip_ansi|split:,:..|filter:\\.py$|sort|map:{prepend:\u2022 }|join:\\n}\n\n# Step by step:\n# 1. trim         -> "\\x1b[31mapp.py,readme.md,test.py\\x1b[0m"\n# 2. strip_ansi   -> "app.py,readme.md,test.py"\n# 3. split:,:..   -> ["app.py", "readme.md", "test.py"]\n# 4. filter:\\.py$ -> ["app.py", "test.py"]\n# 5. sort         -> ["app.py", "test.py"]\n# 6. map:prepend  -> ["\u2022 app.py", "\u2022 test.py"]\n# 7. join:\\n      -> "\u2022 app.py\\n\u2022 test.py"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"escaping-special-characters",children:"Escaping Special Characters"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Backslash in delimiters: ",(0,l.jsx)(n.code,{children:"\\\\:"})," for literal ",(0,l.jsx)(n.code,{children:":"})]}),"\n",(0,l.jsxs)(n.li,{children:["Tab character: ",(0,l.jsx)(n.code,{children:"\\\\t"})]}),"\n",(0,l.jsxs)(n.li,{children:["Newline: ",(0,l.jsx)(n.code,{children:"\\\\n"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"debugging-tips",children:"Debugging Tips"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Start simple"}),": Begin with ",(0,l.jsx)(n.code,{children:"{}"})," and add operations one at a time"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Test incrementally"}),": Use ",(0,l.jsx)(n.code,{children:"--source-command"})," to test templates interactively"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Check ANSI"}),": If colors aren't appearing correctly, try ",(0,l.jsx)(n.code,{children:"strip_ansi"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Verify delimiters"}),": Print raw output to see actual separators"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sh",children:"# Debug a template\ntv --source-command \"echo 'a:b:c'\" --preview-command \"echo 'Field 0: {split:\\\\::0}, Field 1: {split:\\\\::1}'\"\n"})}),"\n",(0,l.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,l.jsxs)(n.p,{children:["For the complete template syntax specification, see the ",(0,l.jsx)(n.a,{href:"https://docs.rs/string_pipeline",children:"string-pipeline documentation"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8885:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>d});var s=i(9378);const l={},r=s.createContext(l);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);